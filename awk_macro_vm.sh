awk_macro_vm(){ awk 'BEGIN{r[0]=0;r[1]=1;r[x]=1;ic=1;while(r[x]){x=substr(ci,ic,1);y=substr(ci,ic+1,1);z=substr(ci,ic+2,1);if(z == "-"){r[x]-=r[y]}; else if(z == "<"){r[x]=r[x]<r[y]}; else if(z == "m"){r[y]=r[x]}; else if(z == "$"){r[x]=system(r[y])}; else if(z == "r"){r[x]=r[r[y]]}; else if(z == "w"){r[r[y]] = r[x]}; else if(z == "i"){getline r[x]}; else if(z == "o"){printf "%s", r[x]}; else if(z == "+"){r[x]=r[x] r[y]}; else if(z == "c"){r[x] = sprintf("%c", r[y])}; else if(z == "#"){r[x] = ord(r[y])}; else if(z == "s"){r[x]=substr(r[x],r[y],1)};else if(z == "x"){ic=-2;ci=r[x]}; ic+=3};};' ci="$1";};
